<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/news/rss.xml" title="Singularity Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/news/atom.xml" title="Singularity Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Singularity" href="/opensearch.xml"><title data-react-helmet="true">User Namespaces &amp; Fakeroot | Singularity</title><meta data-react-helmet="true" property="og:url" content="https://singularity.hpcng.org/docs-admin/user_namespace"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-docs-admin-current"><meta data-react-helmet="true" property="og:title" content="User Namespaces &amp; Fakeroot | Singularity"><meta data-react-helmet="true" name="description" content="User namespaces are an isolation feature that allow processes to run"><meta data-react-helmet="true" property="og:description" content="User namespaces are an isolation feature that allow processes to run"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://singularity.hpcng.org/docs-admin/user_namespace"><link data-react-helmet="true" rel="alternate" href="https://singularity.hpcng.org/docs-admin/user_namespace" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://singularity.hpcng.org/docs-admin/user_namespace" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.df3ffb68.css">
<link rel="preload" href="/assets/js/runtime~main.8647c1f1.js" as="script">
<link rel="preload" href="/assets/js/main.755bb212.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Singularity Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="Singularity Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Singularity</strong></a><a class="navbar__item navbar__link" href="/docs-user/">User Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs-admin/">Administrator Documentation</a><a class="navbar__item navbar__link" href="/news">News</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hpcng/singularity" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="Singularity Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="Singularity Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Singularity</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs-user/">User Documentation</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs-admin/">Administrator Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/news">News</a></li><li class="menu__list-item"><a href="https://github.com/hpcng/singularity" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs-admin/">Admin Quick Start</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-admin/installation">Installing Singularity</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-admin/configfiles">Configuration Files</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs-admin/user_namespace">User Namespaces &amp; Fakeroot</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-admin/security">Container Security</a></li><li class="menu__list-item"><a class="menu__link" href="/docs-admin/appendix">Appendix</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">User Namespaces &amp; Fakeroot</h1></header><div class="markdown"><p>User namespaces are an isolation feature that allow processes to run
with different user identifiers and/or privileges inside that
namespace than are permitted outside. A user may have a <code>uid</code> of
<code>1001</code> on a system outside of a user namespace, but run programs
with a different <code>uid</code> with different privileges inside the
namespace.</p><p>User namespaces are used with containers to make it possible to setup
a container without privileged operations, and so that a normal user
can act as root inside a container to perform administrative tasks,
without being root on the host outside.</p><p>Singularity uses user namespaces in 3 situations:</p><ul><li>When the <code>setuid</code> workflow is disabled or Singularity was
installed without root.</li><li>When a container is run with the <code>--userns</code> option.</li><li>When <code>--fakeroot</code> is used to impersonate a root user when
building or running a container.</li></ul><p>.. _userns-requirements:</p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="user-namespace-requirements"></a>User Namespace Requirements<a class="hash-link" href="#user-namespace-requirements" title="Direct link to heading">#</a></h2><p>To allow unprivileged creation of user namespaces a kernel &gt;=3.8 is
required, with &gt;=3.18 being recommended due to security fixes for user
namespaces (3.18 also adds OverlayFS support which is used by Singularity).</p><p>Additionally, some Linux distributions require that unprivileged user
namespace creation is enabled using a <code>sysctl</code> or kernel command
line parameter. Please consult your distribution documentation or
vendor to confirm the steps necessary to &#x27;enable unprivileged user
namespace creation&#x27;.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="debian"></a>Debian<a class="hash-link" href="#debian" title="Direct link to heading">#</a></h1><p>.. code-block:: none</p><p>  sudo sh -c &#x27;echo kernel.unprivileged_userns_clone=1 \</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &gt;/etc/sysctl.d/90-unprivileged_userns.conf&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>  sudo sysctl -p /etc/sysctl.d /etc/sysctl.d/90-unprivileged_userns.conf</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rhelcentos-7"></a>RHEL/CentOS 7<a class="hash-link" href="#rhelcentos-7" title="Direct link to heading">#</a></h1><p>From 7.4, kernel support is included but must be enabled with:</p><p>.. code-block:: none</p><p>  sudo sh -c &#x27;echo user.max_user_namespaces=15000 \</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &gt;/etc/sysctl.d/90-max_net_namespaces.conf&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>  sudo sysctl -p /etc/sysctl.d /etc/sysctl.d/90-max_net_namespaces.conf</p><p>.. _userns-limitations:</p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="unprivileged-installations"></a>Unprivileged Installations<a class="hash-link" href="#unprivileged-installations" title="Direct link to heading">#</a></h2><p>As detailed in the :ref:<code>non-setuid installation &lt;install-nonsetuid&gt;</code>
section, Singularity can be compiled or configured with the <code>allow
setuid = no</code> option in <code>singularity.conf</code> to not perform privileged
operations using the <code>starter-setuid</code> binary.</p><p>When singularity does not use <code>setuid</code> all container execution will
use a user namespace. In this mode of operation, some features are not
available, and there are impacts to the security/integrity guarantees
when running SIF container images:</p><ul><li>All containers must be run from sandbox directories. SIF images are
extracted to a sandbox directory on the fly, preventing
verification at runtime, and potentially allowing external
modification of the container at runtime.</li><li>Filesystem image, and SIF-embedded persistent overlays cannot be
used.</li><li>Encrypted containers cannot be used. Singularity mounts encrypted
containers directly through the kernel, so that encrypted content
is not extracted to disk. This requires the setuid workflow.</li><li>Fakeroot functionality will rely on external setuid root
<code>newuidmap</code> and <code>newgidmap</code> binaries which may be provided by
the distribution.</li></ul><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="--userns-option"></a>--userns option<a class="hash-link" href="#--userns-option" title="Direct link to heading">#</a></h2><p>The <code>--userns</code> option to <code>singularity run/exec/shell</code> will start a
container using a user namespace, avoiding the setuid privileged
workflow for container setup even if Singularity was compiled and
configured to use setuid by default.</p><p>The same limitations apply as in an unprivileged installation.</p><p>.. _fakeroot:</p><hr><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="fakeroot-feature"></a>Fakeroot feature<a class="hash-link" href="#fakeroot-feature" title="Direct link to heading">#</a></h2><p>Fakeroot (or commonly referred as rootless mode) allows an
unprivileged user to run a container as a <strong>&quot;fake root&quot;</strong> user by
leveraging user namespaces with <code>user namespace UID/GID mapping
&lt;http://man7.org/linux/man-pages/man7/user_namespaces.7.html&gt;</code>_.</p><p>User namespace UID/GID mapping allows a user to act as a different
UID/GID in the container than they are on the host. A user can access
a configured range of UIDs/GIDs in the container, which map back to
(generally) unprivileged user UIDs/GIDs on the host. This allows a
user to be <code>root (uid 0)</code> in a container, install packages etc., but
have no privilege on the host.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="requirements"></a>Requirements<a class="hash-link" href="#requirements" title="Direct link to heading">#</a></h1><p>In addition to user namespace support, Singularity must manipulate
<code>subuid</code> and <code>subgid</code> maps for the user namepsace it creates. By
default this happens transparently in the setuid workflow. With
unprivileged installations of Singularity or where <code>allow setuid =
no</code> is set in <code>singularity.conf</code>, Singularity attempts to use
external setuid binaries <code>newuidmap</code> and <code>newgidmap</code>, so you
need to install those binaries on your system.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="basics"></a>Basics<a class="hash-link" href="#basics" title="Direct link to heading">#</a></h1><p>Fakeroot relies on <code>/etc/subuid</code> and <code>/etc/subgid</code> files to find
configured mappings from real user and group IDs, to a range of
otherwise vacant IDs for each user on the host system that can be
remapped in the usernamespace. A user must have an entry in these
system configuration files to use the fakeroot feature. Singularity
provides a :ref:<code>config fakeroot &lt;config-fakeroot&gt;</code> command to assist
in managing these files, but it is important to understand how they
work.</p><p>For user <code>foo</code> an entry in <code>/etc/subuid</code> might be:</p><p>.. code-block:: none</p><p>  foo:100000:65536</p><p>where <code>foo</code> is the username, <code>100000</code> is the start of the UID
range that can be used by <code>foo</code> in a user namespace uid mapping, and
<code>65536</code> number of UIDs available for mapping.</p><p>Same for <code>/etc/subgid</code>:</p><p>.. code-block:: none</p><p>  foo:100000:65536</p><p>.. note::</p><p>  Some distributions add users to these files on installation, or when
<code>useradd</code>, <code>adduser</code>, etc. utilities are used to manage local
users.</p><p>  The glibc nss name service switch mechanism does not currently
support managing <code>subuid</code> and <code>subgid</code> mappings with external
directory services such as LDAP. You must manage or provision
mapping files direct to systems where fakeroot will be used.</p><p>.. warning::</p><p>  Singularity requires that a range of at least <code>65536</code> IDs is used
for each mapping. Larger ranges may be defined without error.</p><p>  It is also important to ensure that the subuid and subgid ranges
defined in these files don&#x27;t overlap with eachother, or any real
UIDs and GIDs on the host system.</p><p>So if you want to add another user <code>bar</code>, <code>/etc/subuid</code> and
<code>/etc/subgid</code> will look like:</p><p>.. code-block:: none</p><p>  foo:100000:65536
bar:165536:65536</p><p>Resulting in the following allocation:</p><p>+------+----------+----------------------+
| User | Host UID | Sub UID/GID range    |
+======+==========+======================+
| foo  | 1000     | 100000 to 165535     |
+------+----------+----------------------+
| bar  | 1001     | 165536 to 231071     |
+------+----------+----------------------+</p><p>Inside a user namespace / container, <code>foo</code> and <code>bar</code> can now act
as any UID/GID between 0 and 65536, but these UIDs are confined to the
container. For <code>foo</code> UID 0 in the container will map to the host
<code>foo</code> UID <code>1000</code> and <code>1 to 65536</code> will map to <code>100000-165535</code>
outside of the container etc. This impacts the ownership of files,
which will have different IDs inside and outside of the container.</p><p>.. note::</p><p>   If you are managing large numbers of fakeroot mappings you may wish
to specify users by UID rather than username in the <code>/etc/subuid</code>
and <code>/etc/subgid</code> files. The man page for <code>subuid</code> advises:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> When large number of entries (10000-100000 or more) are defined in</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> /etc/subuid, parsing performance penalty will become noticeable. In</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> this case it is recommended to use UIDs instead of login</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"> names. Benchmarks have shown speed-ups up to 20x.</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="filesystem-considerations"></a>Filesystem considerations<a class="hash-link" href="#filesystem-considerations" title="Direct link to heading">#</a></h1><p>Based on the above range, here we can see what happens when the user
<code>foo</code> create files with <code>--fakeroot</code> feature:</p><p>+--------------------------------+----------------------------------+
| Create file with container UID | Created host file owned by UID   |
+================================+==================================+
| 0 (default)                    | 1000                             |
+--------------------------------+----------------------------------+
| 1 (daemon)                     | 100000                           |
+--------------------------------+----------------------------------+
| 2 (bin)                        | 100001                           |
+--------------------------------+----------------------------------+</p><p>Outside of the fakeroot container the user may not be able to remove
directories and files created with a subuid, as they do not match with
the user&#x27;s UID on the host. The user can remove these files by using a
container shell running with fakeroot.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="network-configuration"></a>Network configuration<a class="hash-link" href="#network-configuration" title="Direct link to heading">#</a></h1><p>With fakeroot, users can request a container network named
<code>fakeroot</code>, other networks are restricted and can only be used by
the real host root user. By default the <code>fakeroot</code> network is
configured to use a network veth pair.</p><p>.. warning::</p><p>   Do not change the <code>fakeroot</code> network type in
<code>etc/singularity/network/40_fakeroot.conflist</code> without
considering the security implications.</p><p>.. note::</p><p>  Unprivileged installations of Singularity cannot use <code>fakeroot</code>
network as it requires privilege during container creation to setup
the network.</p><p>.. _config-fakeroot:</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configuration-with-config-fakeroot"></a>Configuration with <code>config fakeroot</code><a class="hash-link" href="#configuration-with-config-fakeroot" title="Direct link to heading">#</a></h1><p>Singularity 3.5 and above provides a <code>config fakeroot</code> command that
can be used by a root user to administer local system <code>/etc/subuid</code>
and <code>/etc/subgid</code> files in a simple manner. This allows users to be
granted the ability to use Singularity&#x27;s fakeroot functionality
without editing the files manually. The <code>config fakeroot</code> command
will automatically ensure that generated subuid/subgid ranges are an
approriate size, and do not overlap.</p><p><code>config fakeroot</code> must be run as the <code>root</code> user, or via <code>sudo
singularity config fakeroot</code> as the <code>/etc/subuid</code> and
<code>/etc/subgid</code> files form part of the system configuration, and are
security sensitive. You may <code>--add</code> or <code>--remove</code> user
subuid/subgid mappings. You can also <code>--enable</code> or <code>--disable</code>
existing mappings.</p><p>.. note::</p><p>  If you deploy Singularity to a cluster you will need to make
arrangements to synchronize <code>/etc/subuid</code> and <code>/etc/subgid</code>
mapping files to all nodes.</p><p>  At this time, the glibc name service switch functionality does not
support subuid or subgid mappings, so they cannot be definied in a
central directory such as LDAP.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="adding-a-fakeroot-mapping"></a>Adding a fakeroot mapping<a class="hash-link" href="#adding-a-fakeroot-mapping" title="Direct link to heading">#</a></h2><p>Use the <code>-a/--add &lt;user&gt;</code> option to <code>config fakeroot</code> to create new
mapping entries so that <code>&lt;user&gt;</code> can use the fakeroot feature of Singularity:</p><p> .. code-block:: none</p><p>  $ sudo singularity config fakeroot --add dave</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="show-generated-etcsubuid"></a>Show generated <code>/etc/subuid</code><a class="hash-link" href="#show-generated-etcsubuid" title="Direct link to heading">#</a></h1><p>  $ cat /etc/subuid
1000:4294836224:65536</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="show-generated-etcsubgid"></a>Show generated <code>/etc/subgid</code><a class="hash-link" href="#show-generated-etcsubgid" title="Direct link to heading">#</a></h1><p>  $ cat /etc/subgid
1000:4294836224:65536</p><p> The first subuid range will be set to the top of the 32-bit UID
space. Subsequent subuid ranges for additional users will be created
working down from this value. This minimizes the change of overlap
with real UIDs on most systems.</p><p>.. note::</p><p>   The <code>config fakeroot</code> command generates mappings specified using
the user&#x27;s uid, rather than their username. This is the preferred
format for faster lookups when configuring a large number of
mappings, and the command can be used to manipulate these by
username.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="deleting-disabling-enabling-mappings"></a>Deleting, disabling, enabling mappings<a class="hash-link" href="#deleting-disabling-enabling-mappings" title="Direct link to heading">#</a></h2><p>Use the <code>-r/--remove &lt;user&gt;</code> option to <code>config fakeroot</code> to
completely remove mapping entries. The <code>&lt;user&gt;</code> will no longer be
able to use the fakeroot feature of Singularity:</p><p>.. code-block:: none</p><p>  $ sudo singularity config fakeroot --remove dave</p><p>.. warning::</p><p>   If a fakeroot mapping is removed, the subuid/subgid range may be
assigned to another user via <code>--add</code>. Any remaining files from
the prior user that were created with this mapping will be
accessible to the new user via fakeroot.</p><p>The <code>-d/--disable</code> and <code>-e/--enable</code> options will comment and
uncomment entries in the mapping files, to temporarily disable and
subsequently re-enable fakeroot functionality for a user. This can be
useful to disable fakeroot for a user, but ensure the subuid/subgid
range assigned to them is reserved, and not re-assigned to a different
user.</p><p>.. code-block:: none</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="disable-dave"></a>Disable dave<a class="hash-link" href="#disable-dave" title="Direct link to heading">#</a></h1><p>  $ sudo singularity config fakeroot --disable dave</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="entry-is-commented"></a>Entry is commented<a class="hash-link" href="#entry-is-commented" title="Direct link to heading">#</a></h1><p>  $ cat /etc/subuid
!1000:4294836224:65536</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="enable-dave"></a>Enable dave<a class="hash-link" href="#enable-dave" title="Direct link to heading">#</a></h1><p>  $ sudo singularity config fakeroot --enable dave</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="entry-is-active"></a>Entry is active<a class="hash-link" href="#entry-is-active" title="Direct link to heading">#</a></h1><p>  $ cat /etc/subuid
1000:4294836224:65536</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/hpcng/singularity-web/edit/main/docs-admin/user_namespace.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs-admin/configfiles"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Configuration Files</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs-admin/security"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Container Security Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#user-namespace-requirements" class="table-of-contents__link">User Namespace Requirements</a></li><li><a href="#unprivileged-installations" class="table-of-contents__link">Unprivileged Installations</a></li><li><a href="#--userns-option" class="table-of-contents__link">--userns option</a></li><li><a href="#fakeroot-feature" class="table-of-contents__link">Fakeroot feature</a></li><li><a href="#adding-a-fakeroot-mapping" class="table-of-contents__link">Adding a fakeroot mapping</a></li><li><a href="#deleting-disabling-enabling-mappings" class="table-of-contents__link">Deleting, disabling, enabling mappings</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs-user">Getting Started</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://join.slack.com/t/hpcng/shared_invite/zt-ll5c3ofb-XhvMPbXUhTVrHlutQz2jbA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://groups.google.com/a/lbl.gov/g/singularity" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mailing List</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/news">News</a></li><li class="footer__item"><a href="https://github.com/hpcng/singularity" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 HPCng. - All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.8647c1f1.js"></script>
<script src="/assets/js/main.755bb212.js"></script>
</body>
</html>